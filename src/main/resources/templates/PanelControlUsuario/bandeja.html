<!DOCTYPE html>
<html lang="es" xmlns:th="http://thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Bandeja | Codiplay Dashboard</title>
	<link rel="stylesheet" th:href="@{/assetsPanelUsuaario/styleUsuario.css}" />
</head>
<body>
	<div class="dashboard-container">
		<aside class="sidebar">
			<div class="logo">
				<a th:href="@{/PanelControlUsuario/inicio}">
					<img th:src="@{/assetsPanelUsuaario/unnamed-removebg-preview.PNG}" alt="Logo Codiplay" />
				</a>
				<span class="logo-text"></span>
			</div>
			<nav class="main-nav">
				<ul>
					<li class="nav-item">
						<a th:href="@{/PanelControlUsuario/inicio}"><i class="fas fa-home"></i> Inicio</a>
					</li>
					<li class="nav-item">
						<a th:href="@{/PanelControlUsuario/mis_cursos}"><i class="fas fa-book"></i> Mis cursos</a>
					</li>
					<li class="nav-item">
						<a th:href="@{/PanelControlUsuario/mis_logros}"><i class="fas fa-medal"></i> Mis logros</a>
					</li>
					<li class="nav-item active">
						<a th:href="@{/PanelControlUsuario/bandeja}"><i class="fas fa-inbox"></i> Bandeja</a>
					</li>
				</ul>
			</nav>
			<div class="support-section">
				<a th:href="@{/PanelControlUsuario/soporte}"><i class="fas fa-life-ring"></i> Soporte</a>
			</div>
		</aside>

		<main class="main-content">
			<header class="top-bar">
				<header class="h1eader">
					<h1>Bandeja</h1>
				</header>
			</header>

			<section class="modules-section">
				<div class="module-cards-wrapper">
					<div class="module-card">
						<h3>Mensajes recibidos</h3>
						<div th:if="${#lists.isEmpty(mensajesRecibidos)}">
							<p>No tienes mensajes nuevos.</p>
						</div>
						<ul th:if="${!#lists.isEmpty(mensajesRecibidos)}" class="lista-mensajes">
							<li th:each="m : ${mensajesRecibidos}">
								<strong th:text="${m.remitente.nombre + ' ' + m.remitente.apellido}">Remitente</strong>
								<span th:text="${#temporals.format(m.fechaEnvio, 'dd/MM/yyyy HH:mm')}">Fecha</span>
								<p th:text="${m.contenido}">Contenido</p>
								<form th:action="@{/PanelControlUsuario/bandeja/responder}" method="post" style="margin-top:0.5rem;">
									<input type="hidden" name="destinatarioId" th:value="${m.remitente.id}" />
									<textarea name="contenido" rows="2" placeholder="Responder..." required></textarea>
									<button type="submit">Responder</button>
								</form>
							</li>
						</ul>
					</div>
					<div class="module-card" style="margin-top:1.5rem;">
						<h3>Mensajes enviados</h3>
						<div th:if="${#lists.isEmpty(mensajesEnviados)}">
							<p>No has enviado mensajes todav√≠a.</p>
						</div>
						<ul th:if="${!#lists.isEmpty(mensajesEnviados)}" class="lista-mensajes">
							<li th:each="m : ${mensajesEnviados}">
								<strong th:text="${m.destinatario.nombre + ' ' + m.destinatario.apellido}">Destinatario</strong>
								<span th:text="${#temporals.format(m.fechaEnvio, 'dd/MM/yyyy HH:mm')}">Fecha</span>
								<p th:text="${m.contenido}">Contenido</p>
							</li>
						</ul>
					</div>
				</div>
			</section>
		</main>
	</div>
</body>
</html>
